backstage:
  postgresql:
    enabled: true
    primary:
      resources:
        requests:
          memory: 256Mi
          cpu: 100m
      livenessProbe:
        initialDelaySeconds: 120
        timeoutSeconds: 10
      readinessProbe:
        initialDelaySeconds: 30
        timeoutSeconds: 10

  appConfig:
    app:
      baseUrl: http://localhost:7007
    backend:
      baseUrl: http://localhost:7007
      listen:
        port: 7007
        # THE FIX: Open the door so Kubernetes can check its pulse
        host: "0.0.0.0"
      cors:
        origin: http://localhost:7007

  # We moved these under 'backend' so the Helm chart reads them correctly
  backend:
    resources:
      requests:
        cpu: 100m
        memory: 512Mi
      limits: {}
    startupProbe:
      initialDelaySeconds: 60
      failureThreshold: 30
      periodSeconds: 10
    livenessProbe:
      initialDelaySeconds: 60
    readinessProbe:
      initialDelaySeconds: 60